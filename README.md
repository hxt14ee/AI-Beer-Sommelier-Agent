# üç∫ AI Beer Sommelier Agent (n8n)

**–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç –Ω–∞ –±–∞–∑–µ n8n, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –ø–∏–≤–Ω–æ–π –±–∞–Ω–∫–∏ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É —Å–æ–º–µ–ª—å–µ —Å —Ç–æ—á–Ω—ã–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏ (ABV, IBU, –†–µ–π—Ç–∏–Ω–≥).**

![n8n](https://img.shields.io/badge/Orchestration-n8n-HW?style=flat&logo=n8n&color=ff655a)
![JavaScript](https://img.shields.io/badge/Code-JavaScript-yellow?style=flat&logo=javascript)
![LLM](https://img.shields.io/badge/AI-OpenRouter%20%2F%20Gemini-blue?style=flat&logo=openai)
![Google Lens](https://img.shields.io/badge/Vision-Google%20Lens-green?style=flat&logo=google)

## üìñ –û –ø—Ä–æ–µ–∫—Ç–µ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–∏–≤–∞ "–≤ –ø–æ–ª–µ–≤—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö". 

–ú–æ–π –∞–≥–µ–Ω—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–∞–π–ø–ª–∞–π–Ω **Search-Based RAG**: –æ–Ω –≤–∏–∑—É–∞–ª—å–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –ø—Ä–æ–¥—É–∫—Ç, —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç "—É–º–Ω—ã–π" –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å (–∏—Å–∫–ª—é—á–∞—è –±–µ–∑–∞–ª–∫–æ–≥–æ–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏) –∏ –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (Untappd, Winestyle, Ratebeer).

---

## ‚öôÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –õ–æ–≥–∏–∫–∞

–í–æ—Ä–∫—Ñ–ª–æ—É –ø–æ—Å—Ç—Ä–æ–µ–Ω –≤ **n8n** –∏ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 5 –∫–ª—é—á–µ–≤—ã—Ö —ç—Ç–∞–ø–æ–≤:

### 1. Visual Recognition (Google Lens API)
–ë–æ—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ–æ—Ç–æ –∏–∑ Telegram –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ —Å–µ—Ä–≤–∏—Å Thordata (Google Lens Scraper).
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å:** API —á–∞—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Ö–æ–∂–∏–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ (`visual_matches`) –±–µ–∑ —Ç–æ—á–Ω–æ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏—è.
- **–†–µ—à–µ–Ω–∏–µ:** –ù–∞–ø–∏—Å–∞–Ω JS-—Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–∞—Ä—Å–∏—Ç JSON, –ø—Ä–∏–æ—Ä–∏—Ç–µ–∑–∏—Ä—É–µ—Ç `Knowledge Graph` (–µ—Å–ª–∏ –µ—Å—Ç—å), –∞ –ø—Ä–∏ –µ–≥–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —á–∞—Å—Ç–æ—Ç–Ω–æ—Å—Ç—å —Å–ª–æ–≤ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö –ø–æ—Ö–æ–∂–∏—Ö –∫–∞—Ä—Ç–∏–Ω–æ–∫.

### 2. Intelligent Query Generation (LLM Layer 1)
–ü–µ—Ä–≤–∞—è —Ä–∞–∑ –Ω–µ–π—Ä–æ—Å–µ—Ç—å –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç **Search Query**.
- **Dual Language Strategy:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–ø–µ—Ä–∞—Ç–æ—Ä `OR` –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –∏ –Ω–∞ –∫–∏—Ä–∏–ª–ª–∏—Ü–µ, –∏ –Ω–∞ –ª–∞—Ç–∏–Ω–∏—Ü–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `(Zhigulevskoye OR –ñ–∏–≥—É–ª–µ–≤—Å–∫–æ–µ)`). –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ —Ä—ã–Ω–∫–∞.
- **Targeted Sources:** –ü–æ–∏—Å–∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω "–±–µ–ª—ã–º —Å–ø–∏—Å–∫–æ–º" –¥–æ–º–µ–Ω–æ–≤: `site:untappd.com`, `site:ratebeer.com`, `site:winestyle.ru`, `site:amwine.ru`.

### 3. Data Normalization (Code Node)
–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ (Organic Results) –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ JavaScript-–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä.
- –°–∫—Ä–∏–ø—Ç –æ—á–∏—â–∞–µ—Ç –≤—ã–¥–∞—á—É –æ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –º—É—Å–æ—Ä–∞ Google.
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Å–Ω–∏–ø–ø–µ—Ç—ã –∏ –æ–ø–∏—Å–∞–Ω–∏—è (`description`), –≥–¥–µ —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è —Ü–∏—Ñ—Ä—ã ABV –∏ IBU.

### 4. Final Synthesis (LLM Layer 2)
–§–∏–Ω–∞–ª—å–Ω—ã–π —à–∞–≥ "–°–æ–º–µ–ª—å–µ" —Å–æ–±–∏—Ä–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É —Ç–æ–≤–∞—Ä–∞.
- –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –≤—ã–≤–æ–¥ –≤ Markdown.
- –ü—Ä–∏–æ—Ä–∏—Ç–µ–∑–∏—Ä—É–µ—Ç —Ä—É—Å—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∏–∑ –º–∞–≥–∞–∑–∏–Ω–æ–≤ –†–§, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–∞–π–¥–µ–Ω—ã.

<img width="1695" height="437" alt="image" src="https://github.com/user-attachments/assets/3b3b7f28-7eb7-4c59-8da4-b241948456c8" />

---

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

* **Orchestrator:** n8n (Self-hosted)
* **Vision API:** Thordata (ScraperAPI for Google Lens)
* **Search:** Google Search (—á–µ—Ä–µ–∑ Thordata)
* **LLM:** GPT-oss-120b (OpenRouter)
* **Languages:** JavaScript (–¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ JSON –≤–Ω—É—Ç—Ä–∏ –Ω–æ–¥)

---

## üíª –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã

<img width="460" height="612" alt="image" src="https://github.com/user-attachments/assets/a6227a33-c35c-40a8-81fc-93383806f7fe" />

<img width="462" height="450" alt="image" src="https://github.com/user-attachments/assets/74d53343-120f-47e8-b45b-df3199c203f3" />

